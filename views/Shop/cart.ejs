<%- include('../partials/nav.ejs')%>
<%- include('../partials/head.ejs') %>
    <link rel="stylesheet" href="/css/cart.css">
    </head>

    <body>
        
        <main>
           
            <% if (products.length > 0) { %>
                <ul class="cart__item-list">
                    <% products.forEach(p => { %>
                        <li class="cart__item">

                            <!-- in the database we have the  "quantity" and "productId" are on top level
                            meanwhile product details are in lower level 
                            therefore if we want to access product details we need to go throgh one level which is productId
                            and as the following : -->

                          
                            <h1><%= p.productId.title %></h1> 
                            <h2>Quantity: <%= p.quantity %></h2>
                            <form action="/cart-delete-item" method="POST">
                                <input type="hidden" value="<%= p.productId._id %>" name="productId">
                                <button class="btn danger" type="submit">Delete</button>
                            </form>
                          
                        </li>
                    <% }) %>
                </ul>
              
                <hr>
                <div class="centered">
                    <form action="/create-order" method="POST">
                        <button type="submit" class="btn__Order">Order Now!</button>
                    </form>
                </div>
                
            <% } else { %>
                <h1>No Products in Cart!</h1>
            <% } %>
        </main>
     